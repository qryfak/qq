@echo off
:: –ó–∞–≥–æ–ª–æ–≤–æ–∫ –æ–∫–Ω–∞
TITLE –°–±–æ—Ä–∫–∞ EXE —Ñ–∞–π–ª–∞ - video_compressor

:: –í–∫–ª—é—á–∞–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥
SETLOCAL ENABLEDELAYEDEXPANSION

:: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ü–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞
color 0a

:: –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ —Ç–µ–∫—É—â—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é (–≥–¥–µ –ª–µ–∂–∏—Ç .bat)
cd /d "%~dp0%"

echo üõ†Ô∏è –ù–∞—á–∏–Ω–∞–µ–º —Å–±–æ—Ä–∫—É...
echo.

:: –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–∞ Python —Å–∫—Ä–∏–ø—Ç–∞
if not exist "compress_first_mp4.py" (
    echo ‚ùå –û—à–∏–±–∫–∞: compress_first_mp4.py –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ —ç—Ç–æ–π –ø–∞–ø–∫–µ.
    echo –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ.
    echo.
    pause
    exit /b
)

:: –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏ pyinstaller
where pyinstaller >nul 2>&1
if %ERRORLEVEL% NEQ 0 (
    echo ‚ùå –û—à–∏–±–∫–∞: PyInstaller –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏–ª–∏ –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ PATH.
    echo –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –µ–≥–æ —á–µ—Ä–µ–∑:
    echo     pip install pyinstaller
    echo.
    pause
    exit /b
)

echo üß± –ó–∞–ø—É—Å–∫–∞—é PyInstaller –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è EXE...
echo.

:: –í—ã–ø–æ–ª–Ω—è–µ–º —Å–±–æ—Ä–∫—É
pyinstaller --onefile --noconsole compress_first_mp4.py

:: –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
if exist "dist\compress_first_mp4.exe" (
    echo ‚úÖ –°–±–æ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–∞!
    echo –ì–æ—Ç–æ–≤—ã–π —Ñ–∞–π–ª: dist\compress_first_mp4.exe
    echo.
) else (
    echo ‚ùå –ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫. EXE —Ñ–∞–π–ª –Ω–µ —Å–æ–∑–¥–∞–Ω.
    echo –í–æ–∑–º–æ–∂–Ω–æ, –æ—à–∏–±–∫–∞ –≤ —Å–∞–º–æ–º —Å–∫—Ä–∏–ø—Ç–µ –∏–ª–∏ –≤ –ø—É—Ç–∏.
    echo.
)

pause